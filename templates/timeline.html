{% extends "layout.html" %}
{% block title %}Timeline{% endblock %}
{% block body %}
{% with messages = get_flashed_messages() %}
<div class="container">
  <div class="row">
    <div class="col s12">

      {% if messages %}
        <div class="card success-flash">
          <div class="card-content">
            {% for message in messages %}
              <p style="color:white;">{{ message }}</p>
            {% endfor %}
          </div>
        </div>
      {% endif %}

      <ul class="collection with-header" id="eventsList">
        <li class="collection-header"><h4>{{ updates|length }} Updates </h4></li>
        {% for update in updates %}
          {% if update.type == 'review' %}
            <li class="collection-item">
              <h5> {{ update.author_username }} left a review for "{{ update.book_title }}": </h5>
              <p> {{ update.content }} </p>
              <p> {{ update.rating }}/10 </p>
            </li>
          {% endif %}
        {% endfor %}
      </ul>

      <br/>
    </div>
  </div>
</div>

{% endwith %}
{% endblock %}
